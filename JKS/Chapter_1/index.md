## Prologue

프론트엔드라는 개발 분야가 등장한 이후 빠르게 발전되어 웹 개발은 곧 프론트엔드이다. 라고 할 정도의 입지가 단단해졌다.

앵귤러라는 프레임워크가 등장했고 리액트가 등장 그 이후로 뷰(Vue)가 등장했고 지금도 또한 빠르게 발전되고 있다.

다만 최근은 **성능 최적화** 라는 주제에 관심을 갖기 시작했다.

구글은 오래전부터 웹 성능에 대해 관심을 가져 왔고 다양한 시도를 헀다.
그 과정에서 Lighthouse AMP 같은 기술이 나오기도 하였고

구글은 계속해서 관심을 가지고 노력중이다.

구글은 성능이 저하되면 사용자가 떠나고 매출이 감소한다. 라고 주장하고있다.

![img.png](img.png)

핀터레스트는 로딩 시간을 40% 줄임으로써 검색 유입률과 가입자 수를 15% 늘렸다고 한다.

웹 성능을 최적화하면 서비스 사용자에게 더 나은 사용자 경험을 제공할 수 있으며 가입률과 전환율을 높이고 이탈율을 낮춰 더 많은 수익을 창출할 수 있다고 한다.


## 성능 최적화는 어떻게 이루어 지는가.

웹 성능을 결정하는 요소는 크게 로딩 성능과 렌더링 성능으로 나뉜다.

로딩 성능은 서버에 있는 웹 페에지에 필요한 기타 리소스를 다운로드할 떄의 성능을 말한다.

고화질 이미지가 포함되어 있을 때 느린 인터넷 환경에서는 이 이미지가 매우 늦게 표현될 것이다.

마찬가지로 HTML, JS, CSS 파일의 크기가 커지면 커질수록 다운로드의 속도가 느려질 것이다.

로딩 성능을 개선하는 좋은 방법은 다운로드해야 하는 리소스 수를 줄이거나 크기를 줄이는 것이다.

아니라면 코드를 분할하여 다운로드하거나 리소스의 우선순위를 매겨 중요한 리소스를 먼저 다운로드하도록 하는 방법이 있다.

## 렌더링 성능

렌더링 성능은 다운로드한 리소스를 가지고 화면을 그릴 떄의 성능을 말한다.

코드를 실행하여 보여 주는 과정을 떠올리면 된다.

렌더링 성능에 크게 영향을 주는 것은 **자바스크립트 코드**이다.

코드를 얼마나 효율적으로 작성했는냐에 따라 화면이 그려지는 속도와 사용자 인터렉션의 자연스러움이 달라진다.

---

## 블로그 서비스 최적화

블로그 서비스는

- 블로그 글 목록 페이지
- 상세 페이지

두 가지로 구성되어 있다.

단순해 보이지만 최적화가 필요한 몇 가지 포인트가 있다.

블로그 서비스를 하나하나 분석하고 뜯어 보면서 최적화 이론과 기법을 배워 볼 수 있을 것이다.

### 이미지 사이즈 최적화

웹 서비스에 매우 다양한 이미지를 사용한다. 하지만 너무 큰 사이즈의 이미지를 무분별하게 사용하면 네트워크 트래픽이 증가해 서비스 로딩이 오래 걸린다.

어떤 이미지 사이즈가 적절한지 살펴보고 블로그 사이트에 적용하여 성능을 높여 보자.

### 코드 분할

코드 분할 기법은 리액트 개발자라면 들어 봤을 것이다. 말 그대로 코드를 분할하는 기법이다. SPA의 특성상
모든 리액트 코드가 하나의 자바스크립트 파일로 번들링되어 로드되기 때문에 첫 페이지 진입 시 당장 사용하지 않는 코드가 다소 포함되어 있다.

이떄 코드 분할을 통해서 필요 없는 코드를 때어 내고 해당 코드를 필요한 시점에 따로 로드할 수 있다.

### 텍스트 압축

웹 페이지에 접속하면 다양한 리소스를 내려받는다. 그 중에는 HTML, CSS, JS 등이 포함되어 있는데

이런 리소스는 다운로드 전에 서버에서 미리 압축할 수 있다. 그러면 원래 사이즈보다 더 작은 사이즈로 다운로드 할 수 있어 빠르게 로드 가능하다.

### 병목 코드 최적화

특정 자바스크립트 코드 떄문에 서비스가 느리게 실행되는 경우가 있다. 어떤 코드가 무엇 떄문에 느린지 몰라서 코드만 보며 한참을 해매는 떄도 있다.

이처럼 서비스를 느리게 만드는 코드를 병목 코드라고 부른다.

### webpack-bundle-analyzer

분석 툴 중에 잘 사용하고 있지 않은 툴이 있어 적어보았다.

크롬 개발자 도구에 있는 툴이 아닌 직접 설치해야 하는 툴이다. webpack 을 통해 번들링된 파일이 어떤 코드 즉 어떤 라이브러리를 담고 있는지 보여준다.

이 툴을 사용해 최종적으로 완성된 번들 파일 중 불필요한 코드가 어떤 코드이고 번들 파일에서 어느 정도의 비중을 차지하고 있는지 확인 가능하다.

--------

## 실행까지의 페이지 생략

----

### Lighthouse 툴을 이용한 페이지 검사

Lighthouse 로 검사하기.

![img_1.png](img_1.png)

저는 책에 나오는 47점 까지는 아니고 70점 중반까지 나왔습니다.

![img_2.png](img_2.png)

### FCP (First Contentful Paint)

FCP 는 페이지가 로드될 때 브라우저가 DOM 콘텐츠의 첫 번째 부분을 렌더링 하는데 걸리는 시간에 관한 지표이다.

저 같은 경우는 1.2초 걸렸네용 ㅎㅎ. 인터넷이 좋았나보다~

### SI (Speed Index)

페이지 로드 중에 콘텐츠가 시각적으로 표시되는 속도를 나타내는 지표이다.
전체 화면을 렌더링하는데 똑같이 4s 초의 시간이 걸려도

밑 사진과 같이 일부 페이지가 로딩을 먼저 시작하면 더 빨리 로드된 것으로 계산되며 높은 점수(10% 가중)를 받는다고 한다.

![img_3.png](img_3.png)


### LCP (Largest Contentful Paint)

LCP는 페이지가 로드될 때 화면 내에 있는 가장 큰 이미지나 텍스트 요소가 렌더링되기까지 걸리는 시간을 나타내는 지표이다.
저는 3.1 s초 걸렸네요..

### TTI (Time to Interative)

TTI 는 사용자가 페이지와 상호 작용 가능한 시점까지 걸리는 시간을 측정한 지표이다.

클릭 또는 키보드 누름 같은 사용자 입력을 의미한다.

### TBT (Total Blocking Time)

페이지가 클릭 키보드 입력 등의 사용자 입력에 응답하지 않도록 차단된 시간을 총합한 지표이다.

FCP 와 TTI 사이의 시간 동안 일어나며 메인 스레드를 독점하여 다른 동작을 방해하는 작업에 걸린 시간을 총합한다.

### CLS (Cumulative Layout Shift)

페이지 로드 과정에서 발생하는 예기치 못한 레이아웃 이동을 측정한 지표이다.

화면상에서 요소의 위치나 크기가 순간적으로 변하는 것을 의미한다.
